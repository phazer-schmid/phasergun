# PhaserGun Primary Context - Core Essence
product:
  name: "PhaserGun (PG)"
  type: "AI-Driven DHF Documentation Engine"
  purpose: "Generate Phase 1 DHF documents using project context, SOPs, and industry standards"

core_function:
  primary: "Generate compliant Phase 1 DHF documents from scratch using project-context.yaml as source of truth"
  differentiation: "Proactive compliance guidance during creation vs. reactive review"

# ============================================================================
# PROJECT CONTEXT - SINGLE SOURCE OF TRUTH
# ============================================================================

project_context:
  definition: "Living YAML document (project-context.yaml) that serves as the single source of truth for all high-level product and project information"
  
  purpose:
    - "Central reference that DHF documents pull from"
    - "Ensures consistency across all generated documents"
    - "Tracks TBD fields that need user input"
    - "Evolves throughout project lifecycle"
  
  scope:
    includes:
      - "Regulatory pathway and intended use"
      - "Product specifications and descriptions"
      - "User profiles and use environment"
      - "Project timeline and team"
      - "Predicate device information"
    
    excludes:
      - "Detailed test protocols (belongs in DHF documents)"
      - "Design drawings (belongs in DHF documents)"
      - "Meeting minutes (belongs in DHF documents)"
  
  structure:
    - "Fields have status: 'confirmed', 'TBD', or null"
    - "TBD fields marked with required_by_phase"
    - "Change log tracks all updates"
    - "Metadata tracks versions and updates"

# ============================================================================
# REGULATORY FRAMEWORK
# ============================================================================

regulatory_framework:
  standards:
    - name: "FDA 21 CFR Part 820.30"
      description: "Design Controls"
    - name: "ISO 13485"
      description: "Quality Management Systems"
    - name: "ISO 14971"
      description: "Risk Management"

# ============================================================================
# SOP MANAGEMENT
# ============================================================================

sop_management:
  purpose: "Understand company-specific procedures without requiring naming standardization"
  
  canonical_categories:
    - id: "quality_manual"
      name: "Quality Manual"
      
    - id: "design_control"
      name: "Design Control Procedure"
      
    - id: "risk_management"
      name: "Risk Management"
      
    - id: "document_control"
      name: "Document Control Procedure"
      
    - id: "production_process"
      name: "Production and Process Control"
      
    - id: "quality_records"
      name: "Quality Records Procedure"
  
  intelligent_classification:
    description: "AI reads SOP content and maps to canonical category"
    process:
      - "User uploads SOP with any filename"
      - "AI analyzes content to determine purpose"
      - "AI maps to appropriate canonical category"
      - "AI extracts company-specific requirements"
      - "AI references SOP during document generation"

# ============================================================================
# DEVELOPMENT PHASES
# ============================================================================

development_phases:
  reference: "dhf_phase_mapping.yaml"
  description: "Phase structure and required DHF documents defined in dhf_phase_mapping.yaml"
  current_focus: "phase_1"
  
  notes:
    - "Phase names and required documents are maintained in dhf_phase_mapping.yaml"
    - "Project status and phase progression tracked in project-context.yaml"

# ============================================================================
# PHASE 1 DHF DOCUMENTS (PRIMARY FOCUS)
# ============================================================================

phase_1_dhf_documents:
  - document_id: "DHF_P1_001"
    name: "Project Plan / Development Plan"
    pulls_from_project_context:
      - "project.device_name"
      - "project.team"
      - "project_planning.timeline.phase_milestones"
      - "regulatory.pathway"
      - "regulatory.intended_use.statement"
    
  - document_id: "DHF_P1_002"
    name: "Product Specification"
    pulls_from_project_context:
      - "product.identity.trade_name"
      - "product.description"
      - "product.specifications.dimensions"
      - "product.specifications.materials"
      - "regulatory.intended_use.statement"
      - "users_and_environment.patient_population"
    
  - document_id: "DHF_P1_003"
    name: "Traceability Matrix"
    pulls_from_project_context:
      - "traceability.user_needs"
      - "traceability.design_inputs"
      - "regulatory.intended_use.statement"
    
  - document_id: "DHF_P1_004"
    name: "Risk Analysis"
    standard: "ISO 14971"
    pulls_from_project_context:
      - "product.description"
      - "users_and_environment.patient_population"
      - "users_and_environment.use_environment"
      - "regulatory.intended_use.statement"
    
  - document_id: "DHF_P1_005"
    name: "Project Feasibility Checklist"
    pulls_from_project_context:
      - "project_planning.timeline.phase_milestones.phase_1"
      - "regulatory.pathway"
      - "project.team"

# ============================================================================
# DESIGN CONTROLS FOUNDATION
# ============================================================================

design_controls:
  user_needs: "What does the user want"
  design_inputs: "Engineering specifications (what device must do)"
  design_outputs: "Drawings, code, schematics (the actual design)"
  verification: "Did we build it right (outputs vs inputs)"
  validation: "Did we build the right device (product vs user needs)"

# ============================================================================
# DOCUMENT GENERATION APPROACH
# ============================================================================

document_generation:
  inputs:
    - "project-context.yaml (source of truth)"
    - "Company SOPs (mapped to canonical categories)"
    - "Industry standards (FDA, ISO)"
    - "PG templates"
  
  process:
    confidence_based_population:
      high_confidence: "Auto-populate section (field status = 'confirmed')"
      medium_confidence: "Suggest content for user approval"
      low_confidence: "Leave blank, prompt user (field status = 'TBD')"
    
    traceability:
      - "Include footnotes showing project-context.yaml source"
      - "Reference specific SOP requirements"
      - "Cite regulatory standards where applicable"
  
  output:
    - "Downloadable document (docx, pdf)"
    - "Editable by user"
    - "Ready for review and approval process"

# ============================================================================
# VALUE PROPOSITION
# ============================================================================

value_proposition:
  - "Faster Phase 1 documentation"
  - "Consistent use of project-context.yaml across all documents"
  - "Compliance with company SOPs and regulatory standards"
  - "Clear identification of missing information (TBD fields)"
  - "Reduced errors through single source of truth"